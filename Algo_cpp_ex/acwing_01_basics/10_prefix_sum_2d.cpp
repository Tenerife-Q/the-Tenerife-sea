#include <iostream>
using namespace std;

/*
 * AcWing ç®—æ³•åŸºç¡€è¯¾ - äºŒç»´å‰ç¼€å’Œ
 * S[i][j] è¡¨ç¤ºä»¥ (1,1) ä¸ºå·¦ä¸Šè§’ï¼Œ(i,j) ä¸ºå³ä¸‹è§’çš„çŸ©å½¢åŒºåŸŸçš„æ€»å’Œã€‚
 * 
 * 1. æ„é€ å…¬å¼ (å®¹æ–¥åŸç†):
 *    S[i][j] = S[i-1][j] + S[i][j-1] - S[i-1][j-1] + a[i][j]
 * 
 * 2. å­çŸ©é˜µæŸ¥è¯¢å…¬å¼:
 *    ä»¥ (x1, y1) ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2) ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µå’Œï¼š
 *    Sum = S[x2][y2] - S[x1-1][y2] - S[x2][y1-1] + S[x1-1][y1-1]
 */

const int N = 1010; // äºŒç»´æ•°ç»„ä¸€èˆ¬å¼€å¤§ä¸€ç‚¹ï¼Œæ³¨æ„å†…å­˜é™åˆ¶
int n, m, q;
int a[N][N], s[N][N];

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);

    cout << "è¯·è¾“å…¥çŸ©é˜µè¡Œæ•° nï¼Œåˆ—æ•° mï¼ŒæŸ¥è¯¢æ¬¡æ•° q: ";
    if (!(cin >> n >> m >> q)) return 0;

    cout << "è¯·è¾“å…¥ " << n << " è¡Œ " << m << " åˆ—çš„çŸ©é˜µå…ƒç´ :" << endl;
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= m; j++) {
            cin >> a[i][j];
            // æ„é€ äºŒç»´å‰ç¼€å’Œ
            s[i][j] = s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1] + a[i][j];
        }
    }

    cout << "è¯·è¾“å…¥ " << q << " ç»„æŸ¥è¯¢ (x1 y1 x2 y2):" << endl;
    while (q--) {
        int x1, y1, x2, y2;
        cin >> x1 >> y1 >> x2 >> y2;
        // æŸ¥è¯¢å­çŸ©é˜µå’Œ
        int sum = s[x2][y2] - s[x1 - 1][y2] - s[x2][y1 - 1] + s[x1 - 1][y1 - 1];
        cout << "å­çŸ©é˜µå’Œä¸º: " << sum << endl;
    }

    return 0;
}


//æ ¹æ®æ•°å½¢ç»“åˆçš„æ€æƒ³ï¼ŒäºŒç»´å‰ç¼€å’Œçš„æ„é€ å’ŒæŸ¥è¯¢å…¬å¼å¯ä»¥é€šè¿‡å¯¹çŸ©å½¢åŒºåŸŸçš„é¢ç§¯è¿›è¡Œåˆ†æå¾—å‡ºã€‚
//1. æ„é€ å…¬å¼çš„æ¨å¯¼ï¼š
//   - S[i-1][j]ï¼šè¡¨ç¤ºä» (1,1) åˆ° (i-1,j) çš„çŸ©å½¢åŒºåŸŸçš„å’Œã€‚
//   - S[i][j-1]ï¼šè¡¨ç¤ºä» (1,1) åˆ° (i,j-1) çš„çŸ©å½¢åŒºåŸŸçš„å’Œã€‚
//   - S[i-1][j-1]ï¼šè¡¨ç¤ºä» (1,1) åˆ° (i-1,j-1) çš„çŸ©å½¢åŒºåŸŸçš„å’Œã€‚
//   - a[i][j]ï¼šè¡¨ç¤ºå½“å‰å…ƒç´ çš„å€¼ã€‚
//   - é€šè¿‡å°† S[i-1][j] å’Œ S[i][j-1] ç›¸åŠ ï¼Œæˆ‘ä»¬å¾—åˆ°äº†åŒ…å« (i,j) çš„ä¸¤ä¸ªçŸ©å½¢åŒºåŸŸçš„å’Œï¼Œ
//   - ä½† (i-1,j-1) çš„åŒºåŸŸè¢«é‡å¤è®¡ç®—äº†ä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦å‡å» S[i-1][j-1]ã€‚
//   - æœ€ååŠ ä¸Šå½“å‰å…ƒç´  a[i][j]ï¼Œå¾—åˆ°å®Œæ•´çš„ S[i][j]ã€‚


// åŒºé—´å’ŒæŸ¥è¯¢å…¬å¼çš„æ¨å¯¼ï¼š
//   - S[x2][y2]ï¼šè¡¨ç¤ºä» (1,1) åˆ° (x2,y2) çš„çŸ©å½¢åŒºåŸŸçš„å’Œã€‚
//   - S[x1-1][y2]ï¼šè¡¨ç¤ºä» (1,1) åˆ° (x1-1,y2) çš„çŸ©å½¢åŒºåŸŸçš„å’Œï¼Œ
//     éœ€è¦å‡å»ä»¥æ’é™¤ä¸Šæ–¹å¤šä½™çš„éƒ¨åˆ†ã€‚
//   - S[x2][y1-1]ï¼šè¡¨ç¤ºä» (1,1) åˆ° (x2,y1-1) çš„çŸ©å½¢åŒºåŸŸçš„å’Œï¼Œ
//     éœ€è¦å‡å»ä»¥æ’é™¤å·¦ä¾§å¤šä½™çš„éƒ¨åˆ†ã€‚
//   - S[x1-1][y1-1]ï¼šè¡¨ç¤ºä» (1,1) åˆ° (x1-1,y1-1) çš„çŸ©å½¢åŒºåŸŸçš„å’Œï¼Œ
//     ç”±äºä¸Šæ–¹å’Œå·¦ä¾§çš„éƒ¨åˆ†éƒ½è¢«å‡å»äº†ï¼Œè¿™éƒ¨åˆ†è¢«é‡å¤å‡å»äº†ä¸¤æ¬¡ï¼Œ
//     å› æ­¤éœ€è¦åŠ å›æ¥ä¸€æ¬¡ã€‚
//   - é€šè¿‡ä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬å¾—å‡ºäº†æŸ¥è¯¢å­çŸ©é˜µå’Œçš„å…¬å¼ã€‚
/*
 * ğŸ”¢ å›¾è§£ï¼šäºŒç»´å‰ç¼€å’Œæ„é€ ä¸æŸ¥è¯¢
 * ==========================================
 * 
 * 1. æ„é€  S[i][j] (Filling the Table)
 *    ç›®æ ‡ï¼šè®¡ç®— (1,1) åˆ° (i,j) çš„æ€»å’Œ
 *    
 *    (1,1)       (j-1)   (j)
 *      +-----------+------+  <-- Row 1
 *      |           |      |
 *      |     A     |  B   |  <-- Row i-1
 *      |           |      |
 *      +-----------+------+
 *      |     C     |  D   |  <-- Row i
 *      +-----------+------+
 * 
 *    åŒºåŸŸå®šä¹‰ï¼š
 *    - A: S[i-1][j-1] (å·¦ä¸Šè§’é‡å éƒ¨åˆ†)
 *    - B: (ä¸Šæ–¹å»¶ä¼¸éƒ¨åˆ†)
 *    - C: (å·¦æ–¹å»¶ä¼¸éƒ¨åˆ†)
 *    - D: a[i][j] (å½“å‰ä½ç½®çš„å…ƒç´ )
 * 
 *    å‰ç¼€å’Œå…³ç³»ï¼š
 *    - S[i-1][j] (ä¸Šæ–¹æ€»å’Œ) = A + B
 *    - S[i][j-1] (å·¦æ–¹æ€»å’Œ) = A + C
 *    
 *    æ¨å¯¼ S[i][j] (å…¶å®å°±æ˜¯ A+B+C+D):
 *    S[i][j] = (A + B) + (A + C) - A + D
 *            = S[i-1][j] + S[i][j-1] - S[i-1][j-1] + a[i][j]
 * 
 * ------------------------------------------
 * 
 * 2. å­çŸ©é˜µæŸ¥è¯¢ (Submatrix Query)
 *    ç›®æ ‡ï¼šæŸ¥è¯¢ (x1, y1) åˆ° (x2, y2) çš„åŒºé—´å’Œ (å³åŒºåŸŸ D)
 *    
 *    (1,1)           (y1-1)      (y2)
 *      +---------------+-----------+
 *      |               |           |
 *      |       A       |     B     | (x1-1)
 *      |   (åŠ å›æ¥)     |   (å‡å»)   |
 *      +---------------+-----------+
 *      |               |           |
 *      |       C       |     D     | (x2)
 *      |     (å‡å»)     |   (ç›®æ ‡)   |
 *      +---------------+-----------+
 * 
 *    åŒºåŸŸå«ä¹‰ï¼š
 *    - S[x2][y2]     = A + B + C + D (æ•´ä¸ªå¤§çŸ©å½¢)
 *    - S[x1-1][y2]   = A + B         (ä¸Šæ–¹ä¸éœ€è¦çš„åŒºåŸŸ)
 *    - S[x2][y1-1]   = A + C         (å·¦æ–¹ä¸éœ€è¦çš„åŒºåŸŸ)
 *    - S[x1-1][y1-1] = A             (å·¦ä¸Šè§’é‡å¤å‡å»çš„åŒºåŸŸ)
 * 
 *    æ¨å¯¼ D (ç›®æ ‡åŒºåŸŸ):
 *    D = (A+B+C+D) - (A+B) - (A+C) + A
 *      = S[x2][y2] - S[x1-1][y2] - S[x2][y1-1] + S[x1-1][y1-1]
 */