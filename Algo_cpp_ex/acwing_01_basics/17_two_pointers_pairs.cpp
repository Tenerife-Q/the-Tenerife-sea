#include <iostream>
#include <algorithm>

using namespace std;

/*
 * 洛谷 P1102 - A-B 数对 (数对统计)
 * 
 * 题目描述：
 * 给出一个递增排序的正整数数列以及一个正整数 C，要求计算出所有满足 A - B = C 的数对的个数。
 * (不同位置的数字一样的数对算不同的数对)。
 * 
 * 核心逻辑：排序 + 双指针
 * 
 * 1. 数学转化：
 *    A - B = C  ==>  A = B + C
 *    于是问题变成了：对于数列中的每一个数 B (我们用 a[k] 表示)，
 *    要在数列中找到有多少个 A (我们用 a[x] 表示) 恰好等于 a[k] + C。
 * 
 * 2. 为什么用双指针？
 *    因为我们先对数组进行了排序。
 *    当 B 变大时，目标 A (即 B+C) 也一定变大。
 *    因此，寻找 A 的范围只会向右移动，不会回头。
 * 
 * 3. 三指针策略 (Three Pointers Logic):
 *    - k: 主循环指针，枚举每一个 B。
 *    - i: 左边界指针，寻找第一个 ">= B+C" 的位置。
 *    - j: 右边界指针，寻找第一个 ">  B+C" 的位置。
 *    - 答案贡献：如果有符合条件的数，它们一定分布在 [i, j) 这个半开区间内。
 *    - 数量 = j - i。
 */

const int N = 200010;
int n, c;
int a[N];

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);

    cout << "请输入数字个数 N 和常数 C (例如: 5 3): ";
    if (!(cin >> n >> c)) return 0;

    cout << "请输入 " << n << " 个整数 (例如: 2 1 5 3 4): ";
    for (int i = 1; i <= n; i++) cin >> a[i];

    // 1. 排序 (双指针的大前提)
    sort(a + 1, a + 1 + n);
    cout << "排序后的数组: ";
    for(int i=1; i<=n; i++) cout << a[i] << " ";
    cout << endl;

    long long ans = 0; // 必须用 long long，防止结果溢出
    
    // 2. 双指针扫描
    // i, j 定义在循环外，体现 "不回退" 的单调性
    int i = 1, j = 1;
    
    cout << "\n----- 开始匹配 A - B = " << c << " (即 A = B + " << c << ") -----" << endl;

    // k 枚举的是 B (较小的那个数)
    for (int k = 1; k <= n; k++) {
        long long target = (long long)a[k] + c; // 我们要找的目标值 A

        // 动作一：i 追赶
        // 只要 a[i] 小于目标值，就一直往右跑
        while (i <= n && a[i] < target) i++;

        // 动作二：j 追赶
        // 只要 a[j] 小于等于目标值，就一直往右跑
        while (j <= n && a[j] <= target) j++;

        // 动作三：结算
        if (i <= n && a[i] == target) {
            long long count = j - i;
            ans += count;
            // 只有当找到了才输出日志，避免输出太多
            if(count > 0) {
                 cout << "当 B=" << a[k] << " (k=" << k << ") 时, 目标 A=" << target 
                      << ". 找到区间 [" << i << ", " << j-1 << "] 共 " << count << " 个。" << endl;
            }
        }
    }

    cout << "------------------------------------------" << endl;
    cout << "满足条件的数对总数: " << ans << endl;

    return 0;
}

// 输入输出示例：
// 请输入数字个数 N 和常数 C (例如: 5 3): 5 3
// 请输入 5 个整数 (例如: 2 1 5 3 4): 2 1 5 3 4
// 排序后的数组: 1 2 3 4 5
// ----- 开始匹配 A - B = 3 (即 A = B + 3) -----
// 当 B=1 (k=1) 时, 目标 A=4. 找到区间 [4, 4] 共 1 个。
// 当 B=2 (k=2) 时, 目标 A=5. 找到区间 [5, 5] 共 1 个。
// ------------------------------------------
// 满足条件的数对总数: 2
